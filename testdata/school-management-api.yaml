name: "School Management API"
version: "1.0.0"
servers:
  - url: "https://api.school.example.com/v1"
    description: "Production server for School Management API"
    id: "production"
  - url: "https://staging-api.school.example.com/v1"
    description: "Staging server for School Management API"
    id: "staging"

enums:
  - name: "StudentStatus"
    description: "Status of a student in the system"
    values:
      - name: "Active"
        description: "Student is actively enrolled"
      - name: "Inactive"  
        description: "Student is not currently enrolled"
      - name: "Graduated"
        description: "Student has graduated"

  - name: "GradeLevel"
    description: "Grade levels in the school"
    values:
      - name: "Elementary"
        description: "Elementary school level"
      - name: "Middle"
        description: "Middle school level"
      - name: "High"
        description: "High school level"

objects:
  - name: "Contact"
    description: "Contact information"
    fields:
      - name: "email"
        type: "String"
        description: "Email address"
      - name: "phone"
        type: "String"
        description: "Phone number"
        modifiers: ["Nullable"]

  - name: "Address"
    description: "Physical address information"  
    fields:
      - name: "street"
        type: "String"
        description: "Street address"
      - name: "city"
        type: "String"
        description: "City"
      - name: "state"
        type: "String"
        description: "State or province"
      - name: "zipCode"
        type: "String" 
        description: "ZIP or postal code"

  - name: "Student"
    description: "Student information"
    fields:
      - name: "firstName"
        type: "String"
        description: "Student's first name"
      - name: "lastName"
        type: "String"
        description: "Student's last name"
      - name: "studentId"
        type: "String"
        description: "School-assigned student ID"
      - name: "status"
        type: "StudentStatus"
        description: "Current status of the student"
      - name: "gradeLevel"
        type: "GradeLevel"
        description: "Current grade level"

resources:
  - name: "Students"
    description: "Student management resource"
    operations: ["Create", "Read", "Update", "Delete"]
    fields:
      - name: "id"
        type: "UUID"
        description: "Unique student identifier"
        operations: ["Read"]
      - name: "firstName"
        type: "String"
        description: "Student's first name"
        operations: ["Create", "Read", "Update"]
      - name: "lastName"
        type: "String"
        description: "Student's last name"
        operations: ["Create", "Read", "Update"]
      - name: "studentId"
        type: "String"
        description: "School-assigned student ID"
        operations: ["Create", "Read"]
      - name: "status"
        type: "StudentStatus"
        description: "Current status of the student"
        default: "Active"
        operations: ["Create", "Read", "Update"]
      - name: "gradeLevel"
        type: "GradeLevel"
        description: "Current grade level"
        operations: ["Create", "Read", "Update"]
      - name: "contact"
        type: "Contact"
        description: "Student contact information"
        operations: ["Create", "Read", "Update"]
      - name: "address"
        type: "Address"
        description: "Student home address"
        modifiers: ["Nullable"]
        operations: ["Create", "Read", "Update"]
      - name: "enrollmentDate"
        type: "Date"
        description: "Date when student was enrolled"
        operations: ["Create", "Read"]
      - name: "graduationDate"
        type: "Date"
        description: "Expected or actual graduation date"
        modifiers: ["Nullable"]
        operations: ["Read", "Update"]
    endpoints:
      - name: "BulkImport"
        title: "Bulk Import Students"
        description: "Import multiple students from a CSV file or structured data"
        method: "POST"
        path: "/bulk-import"
        request:
          content_type: "application/json"
          headers:
            - name: "Authorization"
              type: "String"
              description: "Bearer token for authentication"
          query_params:
            - name: "validateOnly"
              type: "Bool"
              description: "Only validate data without importing"
              default: "false"
          body_params:
            - name: "students"
              type: "Student"
              modifiers: ["Array"]
              description: "Array of student data to import"
            - name: "overwriteExisting"
              type: "Bool"
              description: "Whether to overwrite existing student records"
              default: "false"
        response:
          content_type: "application/json"
          status_code: 200
          description: "Successfully imported students"
          body_fields:
            - name: "imported"
              type: "Int"
              description: "Number of students successfully imported"
            - name: "failed"
              type: "Int"
              description: "Number of students that failed to import"
            - name: "errors"
              type: "String"
              modifiers: ["Array"]
              description: "List of import error messages"

      - name: "GenerateReport"
        title: "Generate Student Report"
        description: "Generate a comprehensive report for students based on filters"
        method: "POST"
        path: "/reports/generate"
        request:
          content_type: "application/json"
          query_params:
            - name: "format"
              type: "String"
              description: "Report format (pdf, excel, csv)"
              default: "pdf"
          body_params:
            - name: "gradeLevel"
              type: "GradeLevel"
              modifiers: ["Nullable"]
              description: "Filter by specific grade level"
            - name: "status"
              type: "StudentStatus"
              modifiers: ["Nullable"]
              description: "Filter by student status"
            - name: "enrollmentDateFrom"
              type: "Date"
              modifiers: ["Nullable"]
              description: "Filter students enrolled after this date"
            - name: "enrollmentDateTo"
              type: "Date"
              modifiers: ["Nullable"]
              description: "Filter students enrolled before this date"
            - name: "includeInactive"
              type: "Bool"
              description: "Include inactive students in report"
              default: "false"
        response:
          content_type: "application/json"
          status_code: 202
          description: "Successfully queued report generation"
          body_fields:
            - name: "reportId"
              type: "UUID"
              description: "Unique identifier for the generated report"
            - name: "estimatedCompletionTime"
              type: "Timestamp"
              description: "When the report is expected to be ready"
            - name: "downloadUrl"
              type: "String"
              modifiers: ["Nullable"]
              description: "URL to download the report once ready"

      - name: "AdvancedSearch"
        title: "Advanced Student Search"
        description: "Search students with advanced filtering and sorting options"
        method: "POST"
        path: "/advanced-search"
        request:
          content_type: "application/json"
          query_params:
            - name: "limit"
              type: "Int"
              description: "Maximum number of results to return"
              default: "50"
            - name: "offset"
              type: "Int"
              description: "Number of results to skip"
              default: "0"
            - name: "sortBy"
              type: "String"
              description: "Field to sort by"
              default: "lastName"
            - name: "sortOrder"
              type: "String"
              description: "Sort order (asc, desc)"
              default: "asc"
          body_params:
            - name: "nameQuery"
              type: "String"
              modifiers: ["Nullable"]
              description: "Search in first name and last name"
            - name: "gradeLevel"
              type: "GradeLevel"
              modifiers: ["Nullable", "Array"]
              description: "Filter by one or more grade levels"
            - name: "status"
              type: "StudentStatus"
              modifiers: ["Nullable", "Array"]
              description: "Filter by one or more statuses"
            - name: "enrollmentDateRange"
              type: "Date"
              modifiers: ["Nullable", "Array"]
              description: "Date range filter [from, to]"
            - name: "hasGraduationDate"
              type: "Bool"
              modifiers: ["Nullable"]
              description: "Filter students with or without graduation date"
        response:
          content_type: "application/json"
          status_code: 200
          description: "Successfully performed advanced search"
          body_fields:
            - name: "students"
              type: "Student"
              modifiers: ["Array"]
              description: "Array of matching students"
            - name: "totalCount"
              type: "Int"
              description: "Total number of matching students"
            - name: "facets"
              type: "String"
              description: "Search facets and counts"